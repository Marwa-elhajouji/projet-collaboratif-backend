# Collaborative Project Backend

This is the backend API for managing users, projects, and tasks in a collaborative application.

## Features

- RESTful API to manage:
  - Users
  - Projects
  - Tasks (with statuses and date ranges)
  - Persistent storage with MySQL
  - Unit tests + code coverage (JaCoCo)
  - Dockerized environment
  - CI/CD pipeline with GitHub Actions

## Technologies

- Java with Spring Boot
- Spring Data JPA (for database interaction)
- REST Controllers
- MySQL
- JaCoCo
- Docker + Docker Compose
- GitHub Actions CI

## Requirements

- Java 17+
- Maven 
- Docker + Docker Compose

## Installation

Clone the repository:

```bash
git clone https://github.com/Marwa-elhajouji/projet-collaboratif-backend.git
cd projet-collaboratif-backend/projet-collaboratif
```

## Running the Application
```bash
./mvnw spring-boot:run
```
By default, the API will run at http://localhost:8080.

## Running with Docker

```bash
cd projet-collaboratif
docker-compose up --build
```

This will:

- Start the MySQL database on localhost:3306
- Launch the Spring Boot API on localhost:8080
- Automatically initialize the schema (schema.sql) and seed data (data.sql)

## API Endpoints

Example endpoints:

- `GET /api/utilisateurs`
- `POST /api/projets`
- `DELETE /api/taches/{id}`

## Environment Variables

The following environment variables are used (defined in `application.properties`):

- `SPRING_DATASOURCE_URL`
- `SPRING_DATASOURCE_USERNAME`
- `SPRING_DATASOURCE_PASSWORD`

 These variables must be updated according to your local or production environment.

## Deployment

The backend is packaged into a Docker image and published automatically to Docker Hub using GitHub Actions.

ðŸ‘‰ [Docker Hub â€“ Backend Image](https://hub.docker.com/r/marwael/projet-collaboratif-backend)



## CI/CD Pipeline â€“ GitHub Actions

Two workflows are set up:

ci-cd.yml: Builds, tests, and deploys Docker image

publish-jacoco.yml: Generates and publishes test coverage report


## Code Coverage â€“ JaCoCo

This project uses JaCoCo to measure test coverage.

To generate the coverage report:

```bash
mvn clean verify
```

To view the report:

```bash
target/site/jacoco/index.html
```

### Online HTML Report

You can view the full JaCoCo code coverage report online here:  
ðŸ‘‰ [View Coverage Report](https://marwa-elhajouji.github.io/projet-collaboratif-backend/)

It includes:
- Missed vs executed instructions
- Covered and uncovered branches
- Detailed per-package and per-class coverage

## Project Structure

- `.github/workflows/` â€“ GitHub Actions workflows (`ci-cd.yml`, `publish-jacoco.yml`)
- `docker-compose.yml` â€“ Docker Compose configuration for MySQL and backend
- `Dockerfile` â€“ Docker image configuration for the Spring Boot application
- `src/main/java/` â€“ Application source code (controllers, services, models)
- `src/main/resources/` â€“ Configuration files (`application.properties`), SQL scripts
- `src/test/java/` â€“ Unit and integration tests
- `schema.sql`, `data.sql` â€“ Initial database schema and test data
- `pom.xml` â€“ Maven dependencies and build config
- `target/site/jacoco/` â€“ Code coverage report generated by JaCoCo

## Database Schema

Schema defined in schema.sql. It includes:

utilisateur: id, nom, email, mot_de_passe, role_id
role: id, nom
projet: id, nom, description, date_debut, date_fin, utilisateur_id
tache: id, titre, description, date_debut, date_fin, statut, projet_id, utilisateur_id

### Entity Relationships

One utilisateur can have multiple projet and tache
Each projet belongs to one utilisateur (responsable)
Each tache is assigned to one utilisateur and belongs to one projet
Each utilisateur has one role



